{% extends "patient_base.html" %}

{% load app_filters %}

{% block content %}
<h1>Medical Records</h1>

<table class="table text-center">
  <thead>
	<tr>
	  <th scope="col">Timestamp</th>
	  <th scope="col">Type</th>
	  <th scope="col">Data</th>
    <th scope="col"></th>
	</tr>
  </thead>
  <tbody>
	{% for result in results %}
  {% to_model_name result as to_model_name_result %}
	<tr>
	  <th scope="row">{{ result.timestamp | get_datetime }}</th>
	  {% if to_model_name_result == 'TimeSeries' %}
      <th>{{ to_model_name_result }}</th>
    {% else %}  
      <th>{{ result.type }}</th>
	  {% endif %}
    <th>
      {% if to_model_name_result == 'Documents' or to_model_name_result == 'Images' or to_model_name_result == 'TimeSeries' or to_model_name_result == 'Videos' %}
        <a href="{{ result.id | get_record_path }}">View Data</a>
      {% else %}
        {{ result.data }}
      {% endif %}
    </th>
    <th><a href="{% url 'show_record' patient_id=result.patient_id.id record_id=result.id %}">More Details</a></th>
	</tr>
	{% endfor %}
  </tbody>
</table>
{% endblock %}